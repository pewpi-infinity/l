cat << 'EOF' > keyvault.html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Infinity Key Vault</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body {
  background:#020712; color:#fff; font-family:Arial;
  padding:20px; max-width:600px; margin:auto;
}
h1 { text-align:center; color:#4dfcff; }
.box {
  background:#0b1222; padding:15px; border-radius:12px;
  margin-top:20px; border:1px solid #222;
}
input,textarea {
  width:100%; padding:10px; margin-top:10px;
  background:#111a33; color:#fff; border:1px solid #333;
  border-radius:8px; font-size:16px;
}
button {
  width:100%; padding:12px; margin-top:15px;
  background:#4dfcff; color:#000; border:none;
  border-radius:8px; font-size:18px; font-weight:bold;
  cursor:pointer;
}
button:hover { background:#32d4dd; }
.result {
  word-break:break-all; background:#111; padding:10px;
  border-radius:8px; margin-top:10px; font-size:14px;
}
</style>
</head>
<body>

<h1>Infinity Key Vault</h1>

<div class="box">
  <h2>Encrypt Wallet Key</h2>
  <textarea id="privateKey" placeholder="Paste your private key here..."></textarea>
  <input id="password" type="password" placeholder="Enter encryption password">
  <button onclick="encryptKey()">Encrypt</button>
  <div id="encryptedResult" class="result"></div>
</div>

<div class="box">
  <h2>Decrypt</h2>
  <textarea id="encryptedInput" placeholder="Paste encrypted key..."></textarea>
  <input id="password2" type="password" placeholder="Enter password to decrypt">
  <button onclick="decryptKey()">Decrypt</button>
  <div id="decryptedResult" class="result"></div>
</div>

<script>
async function encryptKey() {
  const key = document.getElementById("privateKey").value;
  const pass = document.getElementById("password").value;
  if (!key || !pass) return alert("Enter key + password");

  const enc = await aesEncrypt(key, pass);
  document.getElementById("encryptedResult").innerText = enc;
}

async function decryptKey() {
  const cipher = document.getElementById("encryptedInput").value;
  const pass = document.getElementById("password2").value;
  if (!cipher || !pass) return alert("Enter encrypted key + password");

  try {
    const dec = await aesDecrypt(cipher, pass);
    document.getElementById("decryptedResult").innerText = dec;
  } catch {
    alert("Wrong password or corrupt data");
  }
}

// --- Encryption Helpers (AES-GCM) ---
async function aesEncrypt(text, password) {
  const enc = new TextEncoder();
  const pwKey = await crypto.subtle.importKey(
    "raw", enc.encode(password), {name:"PBKDF2"}, false, ["deriveKey"]
  );
  const salt = crypto.getRandomValues(new Uint8Array(16));
  const iv = crypto.getRandomValues(new Uint8Array(12));
  const key = await crypto.subtle.deriveKey(
    {name:"PBKDF2", salt, iterations:500000, hash:"SHA-256"},
    pwKey,
    {name:"AES-GCM", length:256},
    false,
    ["encrypt"]
  );
  const encrypted = await crypto.subtle.encrypt(
    {name:"AES-GCM", iv},
    key,
    enc.encode(text)
  );
  return btoa(JSON.stringify({
    s: Array.from(salt),
    i: Array.from(iv),
    d: Array.from(new Uint8Array(encrypted))
  }));
}

async function aesDecrypt(cipher, password) {
  const dec = new TextDecoder();
  const json = JSON.parse(atob(cipher));
  const salt = new Uint8Array(json.s);
  const iv = new Uint8Array(json.i);
  const data = new Uint8Array(json.d);

  const pwKey = await crypto.subtle.importKey(
    "raw", new TextEncoder().encode(password),
    {name:"PBKDF2"}, false, ["deriveKey"]
  );
  const key = await crypto.subtle.deriveKey(
    {name:"PBKDF2", salt, iterations:500000, hash:"SHA-256"},
    pwKey,
    {name:"AES-GCM", length:256},
    false,
    ["decrypt"]
  );
  const decrypted = await crypto.subtle.decrypt(
    {name:"AES-GCM", iv},
    key,
    data
  );
  return dec.decode(decrypted);
}
</script>

</body>
</html>
EOF
